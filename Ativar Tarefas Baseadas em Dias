blueprint:
  name: "Ativar Tarefas Baseadas em Dias"
  description: "Liga booleanos quando contadores atingem dias configurados"
  domain: automation
  input:
    tarefas:
      name: "Configurar Tarefas"
      description: "Adicione cada tarefa com contador, booleano e dias de alerta"
      selector:
        object:
          schema:
            contador:
              name: "Entidade do Contador"
              selector:
                entity:
                  domain: counter
            booleano:
              name: "Entidade Booleana"
              selector:
                entity:
                  domain: input_boolean
            dias_alerta:
              name: "Dias para Ativar"
              selector:
                number:
                  min: 1
                  max: 365
                  step: 1
      default: []
      required: true

trigger:
  - platform: state
    entity_id: !input tarefas contador

condition: []
action:
  - choose:
      - conditions: "{{ states(trigger.entity_id)|int >= trigger.dias_alerta }}"
        sequence:
          - service: input_boolean.turn_on
            target:
              entity_id: !input tarefas booleano
            data: {}
mode: queued
